<div class="contenedor-pm center">

    <div class="contenedor-pm-second center">

        <div class="row">
            <img src="{{img}}" class="img-pm">
        </div>
        <br>
        <div>
            <div>
                <div class="medio-de-pago-txt">
                    Suscribe un medio de pago
                </div>
                <div class="font-size">
                    Selecciona cualquier tipo de tarjeta de crédito.
                </div>
            </div>
        </div>

        <form [formGroup]="searchForm" class="form-inline" (ngSubmit)="onSubmit()">

            <div class="container" class="container-second-form">
                <div class="row">
                    <div class="form-group col-5 center form-tarjeta-pm">
                        <div>
                            <label for="img-pmo añadir-tarjeta-txt">Añadir tarjeta</label>
                            <div *ngIf="!tarjetaChangeval" class="center contenedor-txt-tarjeta">
                                <span class="contenedor-txt-tarjeta-tarjetaX">{{tarjetaX}}</span>
                                <span class="contenedor-txt-tarjeta-fechaX">{{fechaX}}</span>

                            </div>
                            <img src="{{imgCD}}" class="img-dinamica-tarjeta-credito" alt="">
                            <div *ngIf="tarjetaChangeval"><img class="width-100" id="img-pmo" src="../../../assets/img/payment-model/tarjeta-cvv.svg"></div>
                            <div *ngIf="!tarjetaChangeval"><img class="width-100" id="img-pmo" src="../../../assets/img/payment-model/Frontside.svg"></div>
                        </div>
                    </div>
                    <div class="form-group col">
                        <div style="padding: 5px;">
                            <label class="numero-tarjeta-txt">Número tarjeta</label>

                            <input (click)='changeTargeta(1)' [ngClass]="{'input-error-pd':searchForm.controls['tarjeta'].invalid &&
                            (searchForm.controls['tarjeta'].dirty || searchForm.controls['tarjeta'].touched)}" style="min-width: 240px;" type="text" class="form-control input-pd" formControlName="tarjeta" (ngModelChange)="validateCD() " placeholder="XXXX XXXX XXXX XXXX"
                                maxlength="19">
                            <img src="{{imgCD}}" style="position: relative; width: 30px; top: -33px; left:10px" alt="">
                            <small *ngIf="searchForm.controls['tarjeta'].invalid &&
                            (searchForm.controls['tarjeta'].dirty || searchForm.controls['tarjeta'].touched)"><img class="icon-error-pd" src="../../../assets/img/icon/icon-error.PNG">&nbsp;Ingresa un número de tarjeta válido</small>
                            <br>
                            <div *ngIf="searchForm.controls[ 'tarjeta'].valid && (searchForm.controls[ 'tarjeta'].dirty || searchForm.controls[ 'tarjeta'].touched) " class="row ">

                                <div class="form-group col">
                                    <label>Fecha de expiración</label>
                                    <input (click)='changeTargeta(2)' [ngClass]="{'input-error-pd':searchForm.controls['fechaV'].invalid &&
                                    (searchForm.controls['fechaV'].dirty || searchForm.controls['fechaV'].touched)}" type="text" class="form-control width-100 " maxlength="5 " placeholder="XX/XX " formControlName="fechaV" (ngModelChange)="validateFE() ">
                                    <small *ngIf="searchForm.controls['fechaV'].invalid &&
                            (searchForm.controls['fechaV'].dirty || searchForm.controls['fechaV'].touched)"><img class="icon-error-pd" src="../../../assets/img/icon/icon-error.PNG">&nbsp;Ingresa una fecha válida</small>

                                </div>
                                <div class="form-group col">
                                    <label>CVV</label>
                                    <img src="../../../assets/img/Icon-interrogacion.svg" style="width: 13px;position :absolute; left: 95%" alt="">
                                    <input #cvv (click)='changeTargeta(3)' [ngClass]="{'input-error-pd':searchForm.controls['cvv'].invalid &&
                                    (searchForm.controls['cvv'].dirty || searchForm.controls['cvv'].touched)}" type="password" class="form-control width-100 " placeholder="***" maxlength="3 " formControlName="cvv">
                                    <span (click)="showPassword()" style="position: relative; top: -30px; left: 84%;cursor: pointer;"><i class="bi bi-eye"></i></span>
                                    <small *ngIf="searchForm.controls['cvv'].invalid &&
                            (searchForm.controls['cvv'].dirty || searchForm.controls['cvv'].touched)"><img class="icon-error-pd" src="../../../assets/img/icon/icon-error.PNG">&nbsp;Ingresa código de seguridad válido</small>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
                <div class="row" *ngIf="searchForm.controls['cvv'].valid && searchForm.controls['fechaV'].valid && searchForm.controls['tarjeta'].valid">

                    <div class="form-group col mensaje-cobro-validacion-tarjeta">
                        <img src="../../../assets/img/Icon-interrogacion.svg" style="width: 13px;" alt="">&nbsp;
                        <label> Haremos un cobro <strong>de $50, que serán devueltos</strong> luego de validar tu tarjeta.</label>
                    </div>
                </div>
                <br><br>
                <div class="row">

                    <div class="form-group col container-terminos-condiciones">
                        <input type="checkbox" formControlName="termsconditions">&nbsp;
                        <label> Acepto los  <a href="# ">términos y condiciones.</a></label>
                    </div>
                </div>
            </div>
            <div class="row u847ur-ur74y-9r74">

                <div class="form-group col">
                    <button (click)="inscribirTarjeta() " class="btn-back btn-back-pm" type="submit " (click)="back()">< Volver</button>
                </div>
                <div class="form-group col">
                    <button (click)="inscribirTarjeta() " [disabled]="!searchForm.valid" [ngClass]="{'btn-disable-primary':!searchForm.valid, 'btn-pmo':searchForm.valid}" class="btn-pmo-position " type="submit ">Confirmar y suscribir</button>
                </div>
            </div>

        </form>

    </div>

</div>
<div class="row message-onditions-service">
    <div class="form-group col center container-txt-footer-transacion">
        <label> <img src="../../../assets/img/shield.svg " class="width-26px"> Transacción respaldada por Transbank. Revisa las <a href="# ">condiciones del servicio.</a></label>

        <br><br><br>
    </div>
</div>